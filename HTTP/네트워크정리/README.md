# 인터넷 네트워크

## 컴퓨터는 어떻게 통신할까?

- 초기 컴퓨터는 인터넷이 없어 유선으로 연결하여 데이터를 주고받음
- 인터넷이 등장하면서 유선으로 연결되어 있지 않아도 통신이 가능해짐
- 컴퓨터와 컴퓨터 사이에 수많은 노드들이 있어 여러 서버를 거쳐 클라이언트와 서버 가이에 통신을 가능하게 함

## IP

- 서버와 클라이언트간의 통신을 위해서 필요한 규칙 중 하나가 IP
- 컴퓨터는 인터넷으로 통신을 할 때, 지정된 IP 주소에 데이터를 패킷이라는 통신 단위로 전달
  - 패킷에서는 출발 IP 주소, 목적지 IP 주소 등이 들어있음

## IP 프로토콜의 한계

### 1. 비연결성

- IP 프로토콜은 데이터를 일단 보내는 것으로 통신을 하기 때문에 서버가 버시스를 제공하지 못하는 경우에도 클라이언트는 패킷을 전송함

### 2-1. 비신뢰성 - 중간에 패킷이 사라지면?

- 인터넷 중간 노드가 사라져서 데이터가 유실 될 수 있다.

### 2-2. 비신뢰성 - 패킷이 순서대로 안 오면?

- 송신된 각 데이터가 다른 인터넷 노드로 송신되어 서버로 도착해야 할 순서가 다르게 되는 경우가 있다

### 3. 프로그램 구분

- 같은 IP를 사용하는 서버에서 통신하는 둘 이상일 수 있다.
- 이를 해결하기 위해 만들어 진 것이 TCP

## TCP

### 인터넷 프로토콜의 4계층

- 어플리케이션 계층
  - HTTP, FTP
- 전송 계층
  - TCP, UDP
- 인터넷 계층
  - IP
- 네트워크 인터페이스 계층
- ex) 애플리케이션 단계에서 Hello 메세지를 전달할 때 그 절차
  - 1. 프로그램이 Hello 메세지 생성 후 SOCKET 라이브러리를 통해 전달(애플리케이션 단계)
  - 2. TCP 정보 생성, 메세지 데이터를 포함(전송 단계)
  - 3. IP 패킷 생성, TCP 데이터 포함(인터넷 단계)
  - 4. 서버 도착, 정보처리(네트워크 단계)
- IP 처리에서 패킷 안에 전송 데이터와 정보를 담는다. 전송 데이터 안에 TCP 정보가 담김
  - 패킷 안에는 출발지 포트, 목적지 포트, 전송 제어, 순서, 검증정보 등이 들어 있음

### TCP의 특징

- 1. 연결지향 - TCP 3 way handshake(가상 연결)
  - TCP 통신은 데이터를 주고 받기 전, 서버가 작동하는지 확인하는 과정을 거침. 이를 3 way handshake 과정이라 함.
  - 이를 통해 IP 통신의 문제점인 서버의 서비스 가능 유무를 확인할 수 있음
  - 3번의 ACK 과정에서 클라이언트 측 데이터를 함께 전송 가능
- 2. 데이터 전달 보증
  - TCP 통신은 데이터를 전송하면 데이터 수신 여부를 알려줘야하기 때문에 데이터 수신 상태를 확인할 수 있음
- 3. 데이터 순서 보장
  - TCP 통신은 TCP 정보 내부에 데이터 전달 순서가 있어 패킷의 순서가 꼬였을 경우 꼬인 패킷부터 패킷을 재 전송하도록 서버 혹은 클라이언트에서 알릴 수 있음
- 4. 무엇을 위한 데이터인지 확인 가능
  - 패킷 데이터 정보를 보면 데이터의 PORT가 정해져 있는 것을 볼 수 있음.
  - 각 애플리케이션의 포트를 정하게 되면 각 애플리케이션에 필요한 정보들이 정해져 데이터들이 어떤 애플리케이션을 위한 정보인지를 확인 할 수 있음
  - 대표적 예시로 HTTP는 80번 포트를, HTTPS는 443 포트를 사용
